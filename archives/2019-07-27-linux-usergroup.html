<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="theme-color" content="#ddd4bb"/><meta property="og:type" content="website"/><meta property="og:url" content="https://koka831.github.io"/><meta property="og:site_name" content="/var/log/koka"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="/var/log/koka"/><meta name="twitter:site" content="@k_0ka"/><meta name="twitter:description" content="cat /var/log/koka &gt; /dev/null"/><link rel="alternate" type="application/rss+xml" href="https://koka831.github.io/feed.xml" title="/var/log/koka RSS2.0"/><title>Linux: 画面の明るさを変更できなくなった | /var/log/koka</title><meta property="title" content="Linux: 画面の明るさを変更できなくなった | /var/log/koka"/><meta property="og:title" content="Linux: 画面の明るさを変更できなくなった | /var/log/koka"/><meta property="twitter:title" content="Linux: 画面の明るさを変更できなくなった | /var/log/koka"/><meta property="description" content="バルス"/><meta property="og:description" content="バルス"/><meta property="twitter:description" content="バルス"/><meta property="og:image" content="https://koka831.github.io/img/icon.png"/><meta name="next-head-count" content="19"/><link rel="preload" href="/_next/static/css/fec7387515ee4d96.css" as="style"/><link rel="stylesheet" href="/_next/static/css/fec7387515ee4d96.css" data-n-g=""/><link rel="preload" href="/_next/static/css/9a908afc1d99510a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9a908afc1d99510a.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-49b6f2937c9ce9f4.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-7e73d61bce33e887.js" defer=""></script><script src="/_next/static/chunks/pages/_app-faab68131820b49d.js" defer=""></script><script src="/_next/static/chunks/cb1608f2-47ca080ef71602cd.js" defer=""></script><script src="/_next/static/chunks/956-b5a7377101fb3d44.js" defer=""></script><script src="/_next/static/chunks/pages/archives/%5Bslug%5D-05771db16b7e750a.js" defer=""></script><script src="/_next/static/x76HjjJrROZUn11n4srjR/_buildManifest.js" defer=""></script><script src="/_next/static/x76HjjJrROZUn11n4srjR/_ssgManifest.js" defer=""></script><script src="/_next/static/x76HjjJrROZUn11n4srjR/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><nav class="Header_navigation__container__Xjar7"><div class="Header_navigation__qZpeO"><a href="/">/var/log/koka</a></div><div><a href="/archives">archive</a></div></nav><main class="Layout_container__LBFOo"><div class="slug_container__f_fjw"><div class="slug_main__WMOpC"><article class="slug_article__cOl2p" role="article"><div itemscope="" class="ArticleHeader_header__container__5Gs_X"><a class="ArticleHeader_post__title__gVFje" href="/archives/2019-07-27-linux-usergroup">Linux: 画面の明るさを変更できなくなった</a><p>バルス</p><div class="ArticleHeader_flex__yDiMS"><div class="ArticleHeader_post__tags__uCQyx"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 ArticleHeader_tags__icon__U9c_O" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><p class="Tag_tag__rl8WL">Linux</p><p class="Tag_tag__rl8WL">udev</p></div><div class="ArticleHeader_post__dates__6uEwt"><time dateTime="2019-07-27" itemProp="datePublished" class="PublishDate_post__date__jhH_w">published: <!-- -->2019-07-27</time><time dateTime="2021-01-30" itemProp="datePublished" class="PublishDate_post__date__jhH_w">updated: 2021-01-30</time></div></div></div><div class="slug_article__body__m2pRS"><h2 id="tl-dr"><a href="#tl-dr">TL; DR</a></h2>
<ul>
<li>作業ユーザを<code>video</code>グループに追加</li>
<li>udevのrulesを追加し<code>brightness</code>デバイスへの書き込み権限を付与</li>
</ul>
<h2 id="概要"><a href="#概要">概要</a></h2>
<p>Thinkpad X1 Carbon(2019)を購入したので，Gentooをインストールした.
が，F5, F6での明るさ調整が効かなかった. クッソまぶしい.</p>
<p>明るさ調整には<code>light</code>コマンドを用いたところ，<code>sudo light -A 5</code>のようにroot権限を用いると調整が行えた.</p>
<h2 id="解決策"><a href="#解決策">解決策</a></h2>
<ol>
<li>作業ユーザを<code>video</code>グループに追加する.</li>
</ol>
<p>usergroupは以下で確認できる.</p>
<div class="remark-highlight"><pre class="language-sh"><code class="language-sh">$ cut -d: -f1 /etc/group</code></pre></div>
<p>そのなかでもメジャーなものは以下(独断).</p>
<table>
<thead>
<tr>
<th align="center">name</th>
<th align="center">role</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">wheel</td>
<td align="center">管理権限作業用グループ</td>
</tr>
<tr>
<td align="center">log</td>
<td align="center">/var/log/ へのアクセス用グループ</td>
</tr>
<tr>
<td align="center">video</td>
<td align="center">ビデオキャプチャ・フレームバッファアクセス</td>
</tr>
<tr>
<td align="center">docker</td>
<td align="center">docker作業用グループ</td>
</tr>
</tbody>
</table>
<div class="remark-highlight"><pre class="language-sh"><code class="language-sh">usermod -aG video ${USER}</code></pre></div>
<p><code>usermod</code>コマンドを用いて<code>$USER</code>をグループに追加する.<br>
例えば<code>$USER</code>を<code>docker</code>グループに追加した場合, <code>$USER</code>は<code>docker</code>の操作に管理者権限が不要となる.</p>
<p>(ただ第三者が作成したスクリプトであってもroot権限で実行できるということなので，<code>docker</code>を用いる場合には<code>newgrp</code>を用いて一時的にグループを変更するなどのほうがいいと思う. <code>docker</code>の場合権限昇格などのリスクもあるので気をつけよう．お兄さんとの約束だよ)</p>
<ol start="2">
<li><code>brightness</code>デバイスの書き込み権限を<code>video</code>グループに付与する.</li>
</ol>
<p>画面の明るさ(<code>brightness</code>)は<code>udev</code>によって管理されている.
<code>/usr/lib/udev/rules.d/xx-brightness.rules</code>を次のように記述する.</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ACTION==&#x26;quot;add&#x26;quot;, SUBSYSTEM==&#x26;quot;backlight&#x26;quot;, RUN+=&#x26;quot;/bin/chgrp video /sys/class/backlight/%k/brightness&#x26;quot;
ACTION==&#x26;quot;add&#x26;quot;, SUBSYSTEM==&#x26;quot;backlight&#x26;quot;, RUN+=&#x26;quot;/bin/chmod g+w /sys/class/backlight/%k/brightness&#x26;quot;</code></pre></div>
<p>これで起動時に<code>video</code>グループに対して<code>brightness</code>デバイスへの書き込み権限が付与される.</p>
<h2 id="追記"><a href="#追記">追記</a></h2>
<p>かわいい感じになりました. yay
<figure><img src="./img/desktop.png" alt=""><figcaption>img.1 </figcaption></figure></p>
<h2 id="reference"><a href="#reference">reference</a></h2>
<ul>
<li><a href="https://wiki.archlinux.jp/index.php/%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97" target="_blank" rel="nofollow noopener noreferrer">arch linux#グループ一覧</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Backlight" target="_blank" rel="nofollow noopener noreferrer">arch linux#brightness</a></li>
</ul></div></article><div class="CommitLogs_commit_logs__W6xPi" role="log"><h2>Commits</h2><details><summary><span class="CommitLogs_commit__date___q8bm">2021-01-30 22:18:17</span><span class="CommitLogs_commit__hash__Xyu7v">35b550ae</span><span class="CommitLogs_commit__message__IGUPv">copy md</span></summary><div><div class="remark-highlight"><pre data-file="35b550ae.patch" class="language-git  language-diff"><code class="language-git"><span class="token commit-sha1">commit 35b550ae83af4efaeadf33471c8ca8a32c1079c8</span>
Author: koka &#x26;<a href="mailto:lt;koka.code@gmail.com" class="token email-link">lt;koka.code@gmail.com</a>&#x26;gt;
Date:   Sat Jan 30 22:18:17 2021 +0900

  copy md

diff --git a/_posts/2019-07-27-linux-usergroup.md b/_posts/2019-07-27-linux-usergroup.md
new file mode 100644
index 0000000..0bafcf1
<span class="token deleted">--- /dev/null</span>
<span class="token inserted">+++ b/_posts/2019-07-27-linux-usergroup.md</span>
<span class="token coord">@@ -0,0 +1,65 @@</span>
<span class="token inserted">+---</span>
<span class="token inserted">+title: 'Linux: 画面の明るさを変更できなくなった'</span>
<span class="token inserted">+date: 2019-07-27</span>
<span class="token inserted">+categories:</span>
<span class="token inserted">+- diary</span>
<span class="token inserted">+tags:</span>
<span class="token inserted">+- Linux</span>
<span class="token inserted">+- udev</span>
<span class="token inserted">+description: バルス</span>
<span class="token inserted">+---</span>
<span class="token inserted">+</span>
<span class="token inserted">+## TL; DR</span>
<span class="token inserted">+- 作業ユーザを`video`グループに追加</span>
<span class="token inserted">+- udevのrulesを追加し`brightness`デバイスへの書き込み権限を付与</span>
<span class="token inserted">+</span>
<span class="token inserted">+</span>
<span class="token inserted">+## 概要</span>
<span class="token inserted">+Thinkpad X1 Carbon(2019)を購入したので，Gentooをインストールした. </span>
<span class="token inserted">+が，F5, F6での明るさ調整が効かなかった. クッソまぶしい.</span>
<span class="token inserted">+</span>
<span class="token inserted">+明るさ調整には`light`コマンドを用いたところ，`sudo light -A 5`のようにroot権限を用いると調整が行えた.</span>
<span class="token inserted">+</span>
<span class="token inserted">+## 解決策</span>
<span class="token inserted">+1. 作業ユーザを`video`グループに追加する.</span>
<span class="token inserted">+</span>
<span class="token inserted">+usergroupは以下で確認できる.</span>
<span class="token inserted">+\```sh</span>
<span class="token inserted">+$ cut -d: -f1 /etc/group</span>
<span class="token inserted">+\```</span>
<span class="token inserted">+そのなかでもメジャーなものは以下(独断).</span>
<span class="token inserted">+|name|role|</span>
<span class="token inserted">+|:---:|:---:|</span>
<span class="token inserted">+|wheel| 管理権限作業用グループ|</span>
<span class="token inserted">+|log| /var/log/ へのアクセス用グループ|</span>
<span class="token inserted">+|video| ビデオキャプチャ・フレームバッファアクセス|</span>
<span class="token inserted">+|docker| docker作業用グループ|</span>
<span class="token inserted">+</span>
<span class="token inserted">+\```sh</span>
<span class="token inserted">+usermod -aG video ${USER}</span>
<span class="token inserted">+\```</span>
<span class="token inserted">+`usermod`コマンドを用いて`$USER`をグループに追加する.  </span>
<span class="token inserted">+例えば`$USER`を`docker`グループに追加した場合, `$USER`は`docker`の操作に管理者権限が不要となる.  </span>
<span class="token inserted">+</span>
<span class="token inserted">+(ただ第三者が作成したスクリプトであってもroot権限で実行できるということなので，`docker`を用いる場合には`newgrp`を用いて一時的にグループを変更するなどのほうがいいと思う. `docker`の場合権限昇格などのリスクもあるので気をつけよう．お兄さんとの約束だよ)</span>
<span class="token inserted">+</span>
<span class="token inserted">+2. `brightness`デバイスの書き込み権限を`video`グループに付与する.</span>
<span class="token inserted">+</span>
<span class="token inserted">+画面の明るさ(`brightness`)は`udev`によって管理されている. </span>
<span class="token inserted">+`/usr/lib/udev/rules.d/xx-brightness.rules`を次のように記述する.</span>
<span class="token inserted">+</span>
<span class="token inserted">+\```</span>
<span class="token inserted">+ACTION=="add", SUBSYSTEM=="backlight", RUN+="/bin/chgrp video /sys/class/backlight/%k/brightness"</span>
<span class="token inserted">+ACTION=="add", SUBSYSTEM=="backlight", RUN+="/bin/chmod g+w /sys/class/backlight/%k/brightness"</span>
<span class="token inserted">+\```</span>
<span class="token inserted">+</span>
<span class="token inserted">+これで起動時に`video`グループに対して`brightness`デバイスへの書き込み権限が付与される.</span>
<span class="token inserted">+</span>
<span class="token inserted">+## 追記</span>
<span class="token inserted">+</span>
<span class="token inserted">+かわいい感じになりました. yay</span>
<span class="token inserted">+![](./img/desktop.png)</span>
<span class="token inserted">+</span>
<span class="token inserted">+## reference</span>
<span class="token inserted">+- [arch linux#グループ一覧](https://wiki.archlinux.jp/index.php/%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97)</span>
<span class="token inserted">+- [arch linux#brightness](https://wiki.archlinux.org/index.php/Backlight)</span>
</code></pre></div></div></details></div><div class="Comments_comment__WxfzD" role="comment"><h2 class="Comments_title__YENiL">Comments</h2><div id="github-comment-container"></div></div></div><aside class="slug_aside__gL3UH"><nav class="Toc_toc__nav__rl0h7" role="navigation"><ul class="Toc_toc__Y4dWA"></ul></nav></aside></div></main><footer class="Footer_footer__FDcZZ"><small>Code snippets licensed under MIT, unless otherwise noted.</small></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"2019-07-27-linux-usergroup","title":"Linux: 画面の明るさを変更できなくなった","categories":["diary"],"image":"https://koka831.github.io/img/icon.png","tags":["Linux","udev"],"content":"\u003ch2 id=\"tl-dr\"\u003e\u003ca href=\"#tl-dr\"\u003eTL; DR\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e作業ユーザを\u003ccode\u003evideo\u003c/code\u003eグループに追加\u003c/li\u003e\n\u003cli\u003eudevのrulesを追加し\u003ccode\u003ebrightness\u003c/code\u003eデバイスへの書き込み権限を付与\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"概要\"\u003e\u003ca href=\"#概要\"\u003e概要\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eThinkpad X1 Carbon(2019)を購入したので，Gentooをインストールした.\nが，F5, F6での明るさ調整が効かなかった. クッソまぶしい.\u003c/p\u003e\n\u003cp\u003e明るさ調整には\u003ccode\u003elight\u003c/code\u003eコマンドを用いたところ，\u003ccode\u003esudo light -A 5\u003c/code\u003eのようにroot権限を用いると調整が行えた.\u003c/p\u003e\n\u003ch2 id=\"解決策\"\u003e\u003ca href=\"#解決策\"\u003e解決策\u003c/a\u003e\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e作業ユーザを\u003ccode\u003evideo\u003c/code\u003eグループに追加する.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eusergroupは以下で確認できる.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sh\"\u003e\u003ccode class=\"language-sh\"\u003e$ cut -d: -f1 /etc/group\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eそのなかでもメジャーなものは以下(独断).\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth align=\"center\"\u003ename\u003c/th\u003e\n\u003cth align=\"center\"\u003erole\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003ewheel\u003c/td\u003e\n\u003ctd align=\"center\"\u003e管理権限作業用グループ\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003elog\u003c/td\u003e\n\u003ctd align=\"center\"\u003e/var/log/ へのアクセス用グループ\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003evideo\u003c/td\u003e\n\u003ctd align=\"center\"\u003eビデオキャプチャ・フレームバッファアクセス\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd align=\"center\"\u003edocker\u003c/td\u003e\n\u003ctd align=\"center\"\u003edocker作業用グループ\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sh\"\u003e\u003ccode class=\"language-sh\"\u003eusermod -aG video ${USER}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003ccode\u003eusermod\u003c/code\u003eコマンドを用いて\u003ccode\u003e$USER\u003c/code\u003eをグループに追加する.\u003cbr\u003e\n例えば\u003ccode\u003e$USER\u003c/code\u003eを\u003ccode\u003edocker\u003c/code\u003eグループに追加した場合, \u003ccode\u003e$USER\u003c/code\u003eは\u003ccode\u003edocker\u003c/code\u003eの操作に管理者権限が不要となる.\u003c/p\u003e\n\u003cp\u003e(ただ第三者が作成したスクリプトであってもroot権限で実行できるということなので，\u003ccode\u003edocker\u003c/code\u003eを用いる場合には\u003ccode\u003enewgrp\u003c/code\u003eを用いて一時的にグループを変更するなどのほうがいいと思う. \u003ccode\u003edocker\u003c/code\u003eの場合権限昇格などのリスクもあるので気をつけよう．お兄さんとの約束だよ)\u003c/p\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003e\u003ccode\u003ebrightness\u003c/code\u003eデバイスの書き込み権限を\u003ccode\u003evideo\u003c/code\u003eグループに付与する.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e画面の明るさ(\u003ccode\u003ebrightness\u003c/code\u003e)は\u003ccode\u003eudev\u003c/code\u003eによって管理されている.\n\u003ccode\u003e/usr/lib/udev/rules.d/xx-brightness.rules\u003c/code\u003eを次のように記述する.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003eACTION==\u0026#x26;quot;add\u0026#x26;quot;, SUBSYSTEM==\u0026#x26;quot;backlight\u0026#x26;quot;, RUN+=\u0026#x26;quot;/bin/chgrp video /sys/class/backlight/%k/brightness\u0026#x26;quot;\nACTION==\u0026#x26;quot;add\u0026#x26;quot;, SUBSYSTEM==\u0026#x26;quot;backlight\u0026#x26;quot;, RUN+=\u0026#x26;quot;/bin/chmod g+w /sys/class/backlight/%k/brightness\u0026#x26;quot;\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこれで起動時に\u003ccode\u003evideo\u003c/code\u003eグループに対して\u003ccode\u003ebrightness\u003c/code\u003eデバイスへの書き込み権限が付与される.\u003c/p\u003e\n\u003ch2 id=\"追記\"\u003e\u003ca href=\"#追記\"\u003e追記\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eかわいい感じになりました. yay\n\u003cfigure\u003e\u003cimg src=\"./img/desktop.png\" alt=\"\"\u003e\u003cfigcaption\u003eimg.1 \u003c/figcaption\u003e\u003c/figure\u003e\u003c/p\u003e\n\u003ch2 id=\"reference\"\u003e\u003ca href=\"#reference\"\u003ereference\u003c/a\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://wiki.archlinux.jp/index.php/%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003earch linux#グループ一覧\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://wiki.archlinux.org/index.php/Backlight\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003earch linux#brightness\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","description":"バルス","commits":[{"title":"copy md","date":"2021-01-30 22:18:17","hash":"35b550ae","diff":"\u003cdiv class=\"remark-highlight\"\u003e\u003cpre data-file=\"35b550ae.patch\" class=\"language-git  language-diff\"\u003e\u003ccode class=\"language-git\"\u003e\u003cspan class=\"token commit-sha1\"\u003ecommit 35b550ae83af4efaeadf33471c8ca8a32c1079c8\u003c/span\u003e\nAuthor: koka \u0026#x26;\u003ca href=\"mailto:lt;koka.code@gmail.com\" class=\"token email-link\"\u003elt;koka.code@gmail.com\u003c/a\u003e\u0026#x26;gt;\nDate:   Sat Jan 30 22:18:17 2021 +0900\n\n  copy md\n\ndiff --git a/_posts/2019-07-27-linux-usergroup.md b/_posts/2019-07-27-linux-usergroup.md\nnew file mode 100644\nindex 0000000..0bafcf1\n\u003cspan class=\"token deleted\"\u003e--- /dev/null\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+++ b/_posts/2019-07-27-linux-usergroup.md\u003c/span\u003e\n\u003cspan class=\"token coord\"\u003e@@ -0,0 +1,65 @@\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+title: 'Linux: 画面の明るさを変更できなくなった'\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+date: 2019-07-27\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+categories:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- diary\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+tags:\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- Linux\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- udev\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+description: バルス\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+---\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## TL; DR\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- 作業ユーザを`video`グループに追加\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- udevのrulesを追加し`brightness`デバイスへの書き込み権限を付与\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 概要\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+Thinkpad X1 Carbon(2019)を購入したので，Gentooをインストールした. \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+が，F5, F6での明るさ調整が効かなかった. クッソまぶしい.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+明るさ調整には`light`コマンドを用いたところ，`sudo light -A 5`のようにroot権限を用いると調整が行えた.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 解決策\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+1. 作業ユーザを`video`グループに追加する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+usergroupは以下で確認できる.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+$ cut -d: -f1 /etc/group\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+そのなかでもメジャーなものは以下(独断).\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|name|role|\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|:---:|:---:|\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|wheel| 管理権限作業用グループ|\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|log| /var/log/ へのアクセス用グループ|\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|video| ビデオキャプチャ・フレームバッファアクセス|\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+|docker| docker作業用グループ|\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```sh\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+usermod -aG video ${USER}\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`usermod`コマンドを用いて`$USER`をグループに追加する.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+例えば`$USER`を`docker`グループに追加した場合, `$USER`は`docker`の操作に管理者権限が不要となる.  \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+(ただ第三者が作成したスクリプトであってもroot権限で実行できるということなので，`docker`を用いる場合には`newgrp`を用いて一時的にグループを変更するなどのほうがいいと思う. `docker`の場合権限昇格などのリスクもあるので気をつけよう．お兄さんとの約束だよ)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+2. `brightness`デバイスの書き込み権限を`video`グループに付与する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+画面の明るさ(`brightness`)は`udev`によって管理されている. \u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+`/usr/lib/udev/rules.d/xx-brightness.rules`を次のように記述する.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ACTION==\"add\", SUBSYSTEM==\"backlight\", RUN+=\"/bin/chgrp video /sys/class/backlight/%k/brightness\"\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+ACTION==\"add\", SUBSYSTEM==\"backlight\", RUN+=\"/bin/chmod g+w /sys/class/backlight/%k/brightness\"\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\\```\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+これで起動時に`video`グループに対して`brightness`デバイスへの書き込み権限が付与される.\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## 追記\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+かわいい感じになりました. yay\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+![](./img/desktop.png)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+## reference\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- [arch linux#グループ一覧](https://wiki.archlinux.jp/index.php/%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97)\u003c/span\u003e\n\u003cspan class=\"token inserted\"\u003e+- [arch linux#brightness](https://wiki.archlinux.org/index.php/Backlight)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e"}],"publishedAt":"2019-07-27","updatedAt":"2021-01-30"}},"__N_SSG":true},"page":"/archives/[slug]","query":{"slug":"2019-07-27-linux-usergroup"},"buildId":"x76HjjJrROZUn11n4srjR","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>